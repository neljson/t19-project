<h2>Add, Edit, or Delete colors for the Color Coordinate Page</h2>
<form (ngSubmit)="addColor()" #addForm="ngForm">
    <h3>Add Color</h3>
    <div>
    <label for="colorSelectAdd">Choose a color name:</label>
    <select id="colorSelectAdd" name="newColorName"
            [(ngModel)]="newColorName"
            (change)="onNameDropdownChange()"
            [disabled]="customHexInput ? true : false">
      <option value="">Select a color to add...</option> <option *ngFor="let color of availableColors" [value]="color"
              [disabled]="allColors.includes(color)"> {{ color | titlecase }}
      </option>
    </select>
  </div>

  <p style="text-align: center; margin: 5px 0;">OR</p>

  <div>
    <label for="hexInput">Enter a hex color (#RRGGBB):</label>
    <input
      type="text"
      id="hexInput"
      name="customHexInput"
      [(ngModel)]="customHexInput"
      (input)="onHexInputChange()"
      placeholder="#ff9900"
      pattern="^#([0-9A-Fa-f]{6}|[0-9A-Fa-f]{3})$"
      [disabled]="newColorName ? true : false"
    />
  </div>

  <div *ngIf="getPreviewHex()" class="color-preview-container">
    <label>Preview:</label>
    <div class="color-box" [style.backgroundColor]="getPreviewHex()"></div>
  </div>

  <button type="submit" [disabled]="(!newColorName && !customHexInput) || addForm.invalid">Add</button>
  <p *ngIf="addError" class="error-message">{{ addError }}</p>
</form>


<form (ngSubmit)="editColor()" #editForm="ngForm">
    <h3>Edit Color</h3>
    <label for="colorSelectEdit">
        Select:
        <select name="colorSelectEdit" [(ngModel)]="selectedEditColor" name="editColor" required>
            <option value="" disabled selected>Select a color to edit...</option>
            <option *ngFor="let color of allColors" [value]="color">{{ color }}</option>
        </select>
    </label>
    <label for="newColorValue">
        New Name:
        <select id="newColorValue" name="editName" [(ngModel)]="editColorValue" required>
            <option value="" disabled selected>Select a new name...</option>
            <option *ngFor="let color of availableColors" [value]="color"
                [disabled]="allColors.includes(color) && color !== selectedEditColor">
                {{ color | titlecase }}
            </option>
        </select>
    </label>
    <button type="submit">Update</button>
</form>


<h3>Delete Color</h3>

<label>
    <select [(ngModel)]="selectedDeleteColor" name="deleteColor" required>
        <option value="" disabled selected>Select a color to delete...</option>
        <option *ngFor="let color of allColors" [value]="color">
            {{ color }}
        </option>
    </select>
</label>

<!-- error handling: delete button disabled below 2 colors -->
<button (click)="deleteColor()" [disabled]="allColors.length <= 2 || !selectedDeleteColor">
    Delete
</button>

<!-- error message if less than 2 colors -->
<p *ngIf="allColors.length <= 2" class="error-message">
    You must keep at least 2 colors in the color table.
</p>